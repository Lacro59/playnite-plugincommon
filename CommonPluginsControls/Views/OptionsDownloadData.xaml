<UserControl x:Class="CommonPluginsControls.Controls.OptionsDownloadData"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:CommonPluginsControls.Controls" 
             xmlns:playnitecontrols="clr-namespace:CommonPluginsControls.PlayniteControls"
             mc:Ignorable="d"
             Background="{DynamicResource WindowBackgourndBrush}">

    <UserControl.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#5A9BD5" />
        
        <Style x:Key="SectionHeaderText" TargetType="TextBlock" BasedOn="{StaticResource BaseTextBlockStyle}">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Margin" Value="0,0,0,8" />
        </Style>

        <Style x:Key="ModernRadio" TargetType="RadioButton">
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="Margin" Value="0,4" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="RadioBorder" Background="Transparent" 
                                BorderThickness="1" BorderBrush="Transparent" 
                                CornerRadius="3" Padding="{TemplateBinding Padding}">
                            <StackPanel Orientation="Horizontal">
                                <Grid Width="16" Height="16" VerticalAlignment="Center">
                                    <Ellipse x:Name="OuterCircle" 
                                             Stroke="{DynamicResource NormalBorderBrush}" 
                                             StrokeThickness="1.5" 
                                             Fill="Transparent" />
                                    <Ellipse x:Name="InnerCircle" 
                                             Width="8" Height="8" 
                                             Fill="Transparent" 
                                             HorizontalAlignment="Center" 
                                             VerticalAlignment="Center" />
                                </Grid>
                                <ContentPresenter Margin="10,0,0,0" 
                                                  VerticalAlignment="Center" 
                                                  RecognizesAccessKey="True" />
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="RadioBorder" Property="Background" Value="{DynamicResource HoverBrush}" />
                                <Setter TargetName="OuterCircle" Property="Stroke" Value="{DynamicResource GlyphBrush}" />
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="InnerCircle" Property="Fill" Value="{DynamicResource GlyphBrush}" />
                                <Setter TargetName="OuterCircle" Property="Stroke" Value="{DynamicResource GlyphBrush}" />
                                <Setter TargetName="RadioBorder" Property="BorderBrush" Value="{DynamicResource GlyphBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="{DynamicResource TextBrushDarker}" />
                                <Setter TargetName="OuterCircle" Property="Stroke" Value="{DynamicResource TextBrushDarker}" />
                                <Setter TargetName="InnerCircle" Property="Fill" Value="{DynamicResource TextBrushDarker}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernCheckBox" TargetType="CheckBox">
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Padding" Value="8,6" />
            <Setter Property="Margin" Value="0,4" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Border x:Name="CheckBorder" Background="Transparent" 
                                BorderThickness="1" BorderBrush="Transparent" 
                                CornerRadius="3" Padding="{TemplateBinding Padding}">
                            <StackPanel Orientation="Horizontal">
                                <Grid Width="16" Height="16" VerticalAlignment="Center">
                                    <Border x:Name="Box" 
                                            BorderBrush="{DynamicResource NormalBorderBrush}" 
                                            BorderThickness="1.5" 
                                            Background="Transparent" 
                                            CornerRadius="2" />
                                    <Path x:Name="CheckMark" 
                                          Data="M2,7 L6,11 L14,3" 
                                          Stroke="{DynamicResource GlyphBrush}" 
                                          StrokeThickness="2" 
                                          Visibility="Collapsed" 
                                          Margin="1" />
                                </Grid>
                                <ContentPresenter Margin="10,0,0,0" 
                                                  VerticalAlignment="Center" 
                                                  RecognizesAccessKey="True" />
                            </StackPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="CheckBorder" Property="Background" Value="{DynamicResource HoverBrush}" />
                                <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource GlyphBrush}" />
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                                <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource GlyphBrush}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="{DynamicResource TextBrushDarker}" />
                                <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource TextBrushDarker}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentBrush}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="Padding" Value="20,8" />
            <Setter Property="Margin" Value="8,0,0,0" />
            <Setter Property="MinWidth" Value="100" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="3" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.85" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.7" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.5" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="{DynamicResource NormalBorderBrush}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="ButtonBorder" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                              VerticalAlignment="Center" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Background" Value="{DynamicResource HoverBrush}" />
                                <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="{DynamicResource GlyphBrush}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.7" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SectionBorder" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource ControlBackgroundBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource NormalBorderBrush}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="Padding" Value="16,12" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>
    </UserControl.Resources>

    <Grid MaxWidth="900" MinWidth="650">
        <Border HorizontalAlignment="Center" 
                VerticalAlignment="Center"
                BorderThickness="0,1,0,0"
                BorderBrush="{DynamicResource NormalBorderBrush}">

            <DockPanel LastChildFill="True" Margin="20">
                <!-- Header -->
                <StackPanel DockPanel.Dock="Top" Margin="0,0,0,20">
                    <TextBlock Text="{DynamicResource LOCFilters}" 
                               Style="{DynamicResource BaseTextBlockStyle}"
                               FontSize="20" 
                               FontWeight="SemiBold" />
                    <Border Height="2" 
                            Background="{DynamicResource GlyphBrush}" 
                            HorizontalAlignment="Stretch" 
                            Margin="0,8,0,0" />
                </StackPanel>

                <!-- Footer buttons -->
                <Border BorderThickness="0,1,0,0" 
                        BorderBrush="{DynamicResource NormalBorderBrush}"
                        Padding="0,10,0,0"
                        Margin="0,10,0,0"
                        DockPanel.Dock="Bottom">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right">
                        <Button Name="PART_BtClose" 
                                Content="{DynamicResource LOCCloseLabel}" 
                                Style="{StaticResource SecondaryButton}" 
                                Click="PART_BtClose_Click"
                                TabIndex="1" />
                        <Button Name="PART_BtDownload" 
                                Content="{DynamicResource LOCDownloadLabel}" 
                                Style="{StaticResource ModernButton}" 
                                Click="PART_BtDownload_Click"
                                TabIndex="0" />
                    </StackPanel>
                </Border>

                <!-- Main content -->
                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                              HorizontalScrollBarVisibility="Disabled">
                    <StackPanel>
                        <!-- Game Source Section -->
                        <Border Style="{StaticResource SectionBorder}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCCommonGameSource}" 
                                           Style="{StaticResource SectionHeaderText}" />
                                <UniformGrid Columns="3" Rows="1">
                                    <RadioButton Name="PART_AllGames" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 IsChecked="True"
                                                 Content="{DynamicResource LOCQuickFilterAllGames}" />
                                    <RadioButton Name="PART_Filtred" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Content="{DynamicResource LOCMetaGameSourceFiltered}" />
                                    <RadioButton Name="PART_Selected" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Content="{DynamicResource LOCMetaGameSourceSelected}" />
                                </UniformGrid>
                            </StackPanel>
                        </Border>

                        <!-- Installation Status Section -->
                        <Border Style="{StaticResource SectionBorder}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCCommonInstallationStatus}" 
                                           Style="{StaticResource SectionHeaderText}" />
                                <UniformGrid Columns="3" Rows="1">
                                    <RadioButton Name="PART_GamesInstalled" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCGameIsGameInstalledTitle}" />
                                    <RadioButton Name="PART_GamesNotInstalled" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCGameIsUnInstalledTitle}" />
                                    <RadioButton Name="PART_GamesFavorite" 
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCQuickFilterFavorites}" />
                                </UniformGrid>
                            </StackPanel>
                        </Border>

                        <!-- Time-based Filters Section -->
                        <Border Style="{StaticResource SectionBorder}">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCCommonTimeFilters}" 
                                           Style="{StaticResource SectionHeaderText}" />
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <RadioButton Name="PART_OldData" 
                                                 Grid.Column="0"
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCCommonOldData}" />
                                    <RadioButton Name="PART_GamesRecentlyPlayed" 
                                                 Grid.Column="1"
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCQuickFilterRecentlyPlayed}" />
                                    <RadioButton Name="PART_GamesRecentlyAdded" 
                                                 Grid.Column="2"
                                                 Style="{StaticResource ModernRadio}"
                                                 GroupName="RadioFilters" 
                                                 Checked="RadioButton_Checked"
                                                 Content="{DynamicResource LOCCommonRecentlyAdded}" />

                                    <Border Grid.Column="3" 
                                            Background="{DynamicResource ControlBackgroundBrush}"
                                            BorderBrush="{DynamicResource NormalBorderBrush}"
                                            BorderThickness="1"
                                            CornerRadius="3"
                                            Padding="12,6"
                                            Margin="16,0,0,0">
                                        <StackPanel Name="Part_MonthSelect" 
                                                    Orientation="Horizontal">
                                            <TextBlock Text="{DynamicResource LOCCommonSince}" 
                                                       Style="{DynamicResource BaseTextBlockStyle}"
                                                       VerticalAlignment="Center" 
                                                       Margin="0,0,8,0" />
                                            <playnitecontrols:NumericBox x:Name="PART_Months" 
                                                                         MinWidth="50" 
                                                                         Height="24" 
                                                                         LongValue="1" 
                                                                         MinLongValue="1" 
                                                                         HorizontalContentAlignment="Center" 
                                                                         VerticalAlignment="Center" />
                                            <TextBlock Text="{DynamicResource LOCCommonMonthsLabel}" 
                                                       Style="{DynamicResource BaseTextBlockStyle}"
                                                       VerticalAlignment="Center" 
                                                       Margin="8,0,0,0" />
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Additional Options -->
                        <Border Style="{StaticResource SectionBorder}" Margin="0">
                            <StackPanel>
                                <TextBlock Text="{DynamicResource LOCCommonAdditionalOptions}" 
                                           Style="{StaticResource SectionHeaderText}" />
                                <UniformGrid Columns="2" Rows="1">
                                    <CheckBox Name="PART_TagMissing" 
                                              Style="{StaticResource ModernCheckBox}"
                                              IsChecked="False"
                                              Content="{DynamicResource LOCCommonMissingData}" />
                                    <CheckBox Name="PART_OnlyMissing" 
                                              Style="{StaticResource ModernCheckBox}"
                                              IsChecked="True"
                                              Content="{DynamicResource LOCCommonOnlyMissing}" />
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>
